"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3973],{88287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(32735),i=n(60216),l=n.n(i),r=n(75672),o=n(11838),c=n(20374),u=n(90004),s=n(58468);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,i,l=[],r=!0,o=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(o)throw i}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var g=function(e){var t=e.is_visible,n=e.toggleUpdateEmailModal,i=e.logoutClient,l=e.new_email,r=e.verification_code,d=e.is_logged_in,g=m(a.useState(!1),2),f=g[0],_=g[1],h=m(a.useState(null),2),p=h[0],y=h[1],v={change_email:"update",new_email:l,verification_code:r},b=function(){s.WS.changeEmail(v).then((function(e){_(!0),e.error&&(y(e.error.message),i())}))};return a.useEffect((function(){d?s.WS.wait("authorize").then((function(){b()})):b()}),[]),a.createElement(o.Modal,{is_open:t,has_close_icon:!1,toggleModal:n,width:"440px",minHeight:"400px"},f?a.createElement("div",{className:"change-email-update"},!p&&a.createElement(o.Icon,{className:"change-email-update__modal-icon",icon:"IcEmailVerified",size:128}),a.createElement(o.Text,{className:"change-email-update__modal-title",weight:"bold",size:"s"},a.createElement(c.Localize,{i18n_default_text:p?"Failed":"Success!"})),a.createElement(o.Text,{className:"change-email-update__modal-description",size:"xs"},a.createElement(c.Localize,{i18n_default_text:p||"Your email address has changed.<0 />Now, log in with your new email address.",components:[a.createElement("br",{key:0})]})),a.createElement(o.Modal.Footer,{className:"change-email-update__footer"},a.createElement(o.Button,{onClick:function(){n(!1),d?i().then((function(){(0,u.redirectToLogin)(!1,(0,c.getLanguage)(),!1)})):(0,u.redirectToLogin)(!1,(0,c.getLanguage)(),!1)},has_effect:!0,text:(0,c.localize)("Log in"),primary:!0,large:!0}))):a.createElement(o.Loading,{is_fullscreen:!1}))};g.prototypes={toggleUpdateEmailModal:l().func,is_visible:l().bool,logoutClient:l().func,new_email:l().string,verification_code:l().string,is_logged_in:l().bool};const f=(0,r.$j)((function(e){var t=e.ui,n=e.client;return{logoutClient:n.logout,is_visible:t.is_update_email_modal_visible,toggleUpdateEmailModal:t.toggleUpdateEmailModal,new_email:n.new_email.system_email_change,verification_code:n.verification_code.system_email_change,is_logged_in:n.is_logged_in}}))(g)}}]);